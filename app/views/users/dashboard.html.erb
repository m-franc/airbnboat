<div class="d-flex">
  <!-- Sidebar -->
  <div class="sidebar bg-light shadow-sm p-3">
    <h3 class="text-center text-info mb-4">Dashboard</h3>
    <ul class="nav flex-column">
      <li class="nav-item mb-3">
        <%= link_to "Profile Details", "#profile-details", class: "nav-link text-secondary fw-bold" %>
      </li>
      <li class="nav-item mb-3">
        <%= link_to "My Bookings", "#my-bookings", class: "nav-link text-secondary fw-bold" %>
      </li>
      <li class="nav-item mb-3">
        <%= link_to "Bookings of My Boats", "#bookings-of-my-boats", class: "nav-link text-secondary fw-bold" %>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="content-container flex-grow-1 p-4">
    <!-- Profile Details Section -->
    <section id="profile-details" class="mb-5">
      <h2 class="text-secondary mb-4">Profile Details</h2>
      <div class="d-flex align-items-center mb-4">
        <% if current_user.photo_profil.present? %>
          <img src="<%= current_user.photo_profil %>" alt="Profile Picture" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;">
        <% else %>
          <div class="rounded-circle bg-secondary d-flex justify-content-center align-items-center" style="width: 100px; height: 100px; font-size: 1.5rem; color: white;">
            <%= current_user.first_name %>
          </div>
        <% end %>
        <div class="ms-4">
          <h4><%= current_user.first_name %> <%= current_user.last_name %></h4>
          <p class="text-primary mb-1"><%= current_user.email %></p>
          <p class="text-primary mb-1"><strong>Joined:</strong> <%= current_user.created_at.strftime("%B %d, %Y") %></p>
          <p class="text-primary"><strong>Rating:</strong> <%= current_user.rating || "N/A" %></p>
          <%= link_to "Edit Profile", edit_user_registration_path, class: "btn btn-outline-secondary btn-sm mt-3" %>
        </div>
      </div>
    </section>

    <!-- My Bookings Section -->
    <section id="my-bookings" class="mb-5">
      <h2 class="text-secondary mb-4">My Bookings</h2>
      <% if @my_bookings.present? %>
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-secondary">Boat</th>
              <th class="text-secondary">Start Date</th>
              <th class="text-secondary">End Date</th>
              <th class="text-secondary">Price per day</th>
              <th class="text-secondary"># Passengers</th>
              <th class="text-secondary">View Boat</th>
            </tr>
          </thead>
          <tbody>
            <% @my_bookings.each do |booking| %>
              <tr>
                <td class="text-primary"><%= booking.boat.name %></td>
                <td class="text-primary"><%= booking.start_date %></td>
                <td class="text-primary"><%= booking.end_date %></td>
                <td class="text-primary"><%= booking.boat.daily_price %> €</td>
                <td class="text-primary"><%= booking.people %></td>
                <td>
                  <%= link_to "View", boat_path(booking.boat), class: "btn btn-outline-secondary btn-sm" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p class="text-muted">You have no bookings yet.</p>
      <% end %>
    </section>

    <!-- Bookings of My Boats Section -->
    <section id="bookings-of-my-boats" class="mb-5">
      <h2 class="text-secondary mb-4">Bookings of My Boats</h2>
      <% if @my_boat_bookings.present? %>
        <table class="table table-striped">
          <thead>
            <tr>
              <th class="text-secondary">Boat</th>
              <th class="text-secondary">User</th>
              <th class="text-secondary">Start Date</th>
              <th class="text-secondary">Start Date</th>
              <th class="text-secondary">Price per day</th>
              <th class="text-secondary"># Passengers</th>
              <th class="text-secondary">View Boat</th>
            </tr>
          </thead>
          <tbody>
            <% @my_boat_bookings.each do |booking| %>
              <tr>
                <td class="text-primary"><%= booking.boat.name %></td>
                <td class="text-primary"><%= booking.user.email %></td>
                <td class="text-primary"><%= booking.start_date %></td>
                <td class="text-primary"><%= booking.end_date %></td>
                <td class="text-primary">€<%= booking.boat.daily_price %></td>
                <td class="text-primary"><%= booking.people %></td>
                <td>
                  <%= link_to "View", boat_path(booking.boat), class: "btn btn-outline-secondary btn-sm" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <p class="text-muted">No bookings for your boats yet.</p>
      <% end %>
    </section>
  </div>
</div>
